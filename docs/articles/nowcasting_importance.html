<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="nowcaster">
<title>Nowcasting for decision making â€¢ nowcaster</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Nowcasting for decision making">
<meta property="og:description" content="nowcaster">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">nowcaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/nowcaster.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/forecasting.html">Forecasting</a>
    <a class="dropdown-item" href="../articles/nowcasting_importance.html">Nowcasting for decision making</a>
    <a class="dropdown-item" href="../articles/structured_data.html">Structured data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/covid19br/nowcaster/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Nowcasting for decision making</h1>
                        <h4 data-toc-skip class="author">Rafael Lopes
&amp; Leonardo Bastos</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/covid19br/nowcaster/blob/HEAD/vignettes/articles/nowcasting_importance.Rmd" class="external-link"><code>vignettes/articles/nowcasting_importance.Rmd</code></a></small>
      <div class="d-none name"><code>nowcasting_importance.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="nowcasting-as-a-tool-to-support-decision-making">Nowcasting as a tool to support decision making<a class="anchor" aria-label="anchor" href="#nowcasting-as-a-tool-to-support-decision-making"></a>
</h2>
<p>Nowcasting a rising curve or a curve on any other moment can give
quantitative support for decision making, during the public health
crises, the most needed is a way to anticipate, at least, what it is
happening at the moment. Nowcasting is the tool for this type of
questioning and can gives insights on the data to support needed
decisions.</p>
<p>We start this section by cutting the original data at a moment of
apparent decaying of the SARI hospitalisation, for the city of Belo
Horizonte, which had a prompt starting response to the Covid=19
pandemic. The pressure on the health system took more time than the rest
of the country, and the data at same time were showing a decay. We
filter all cases entered until 4th of July of 2020 by the date of
digitisation, a date that the cases shows up in the database.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://covid19br.github.io/nowcaster">nowcaster</a></span><span class="op">)</span>

<span class="co">## To see Nowcasting as if we were on the verge of rise in the curve</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sragBH"</span><span class="op">)</span>
<span class="va">srag_now</span><span class="op">&lt;-</span><span class="va">sragBH</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">DT_DIGITA</span> <span class="op">&lt;=</span> <span class="st">"2020-07-04"</span><span class="op">)</span>

<span class="va">data_by_week</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/data.w_no_age.html">data.w_no_age</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">srag_now</span>, 
                         date_onset <span class="op">=</span> <span class="va">DT_SIN_PRI</span>, 
                         date_report <span class="op">=</span> <span class="va">DT_DIGITA</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">data_by_week</span> |&gt;  
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date_onset</span>, 
             y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">'Date of onset of symptons'</span>, 
       y <span class="op">=</span> <span class="st">'NÂº Cases'</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="st">'black'</span><span class="op">)</span>, 
                     name <span class="op">=</span> <span class="st">''</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">'2 weeks'</span>, 
               date_labels <span class="op">=</span> <span class="st">'%V/%y'</span>, 
               name <span class="op">=</span> <span class="st">'Date in Weeks'</span><span class="op">)</span></code></pre></div>
<p><img src="nowcasting_importance_files/figure-html/no_age_data-1.png" width="700"></p>
<p>On this filtered data, we estimate the cases already that started its
date of onset of symptoms but were not yet reported, so there not in the
database. We just pass to the <code>nowcasting_inla</code> function, the
dataset filtered, flag for the columns where are the
<code>date_onset</code> and <code>date_report</code>, we add the flag
for the function return back the epidemic curve by epiweek.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nowcasting_bh_no_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nowcasting_inla.html">nowcasting_inla</a></span><span class="op">(</span>dataset <span class="op">=</span> <span class="va">srag_now</span>, 
                                        date_onset <span class="op">=</span> <span class="va">DT_SIN_PRI</span>, 
                                        date_report <span class="op">=</span> <span class="va">DT_DIGITA</span>, 
                                        data.by.week <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nowcasting_bh_no_age</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 Ã— 3</span></span>
<span class="co">#&gt; <span style="color: #949494;"># Groups:   date_onset [1]</span></span>
<span class="co">#&gt;   date_onset observed Delay</span>
<span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2019-12-28       21     6</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2019-12-28       21     1</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2019-12-28       21     2</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2019-12-28       21     3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2019-12-28       21     3</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2019-12-28       21    18</span></code></pre></div>
<p>Before we see the result of the nowcasting estimate we take a look on
intermediate part of the process of nowcasting, the delay triangle,
which sets the objects for nowcasting. The delay triangle is only a
table where each unique amount of delay, (i.e.Â integer numbers of days
or weeks) has passed between date of onset and date of report spread
over each date of onset. The part that is closer to the present has less
counts and has a lower amount of delay, this trivial due to, as the
system takes time to process the cases, the most newer cases are lesser
than the older ones, that already time to be processed.</p>
<p>From the data in weekly format we mount the counts of cases by the
amount of delay. By tabling the delay amount against the data of onset
of first symptoms, to see the pattern of the delay for the cases.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_triangle</span> <span class="op">&lt;-</span> <span class="va">nowcasting_bh_no_age</span><span class="op">$</span><span class="va">data</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Delay</span> <span class="op">&lt;</span> <span class="fl">30</span>, <span class="va">date_onset</span> <span class="op">&gt;=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">date_onset</span><span class="op">)</span> <span class="op">-</span> <span class="fl">270</span><span class="op">)</span> |&gt; 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">Delay</span><span class="op">)</span>

<span class="va">delay_triangle</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">data_triangle</span><span class="op">$</span><span class="va">date_onset</span>, 
                      <span class="va">data_triangle</span><span class="op">$</span><span class="va">Delay</span>,
                      dnn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Date of Onset"</span>, <span class="st">"Delay"</span><span class="op">)</span><span class="op">)</span>
<span class="va">delay_triangle</span>
<span class="co">#&gt;              Delay</span>
<span class="co">#&gt; Date of Onset   0   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15</span>
<span class="co">#&gt;    2019-12-28   1   2   4   5   2   2   2   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-04   0   1   4   5   5   2   0   0   0   2   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-11   1   5   6   4   1   2   0   0   1   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-18   2   3   6   9   2   0   3   1   0   1   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-25   0   6   3   2   1   1   1   0   0   2   0   0   1   0   0   0</span>
<span class="co">#&gt;    2020-02-01   1   3   5   1   3   4   2   0   1   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-02-08   0   5   3   5   0   3   1   4   0   0   0   0   0   1   0   0</span>
<span class="co">#&gt;    2020-02-15   0   2   7   1   1   4   2   2   1   1   0   0   1   0   0   0</span>
<span class="co">#&gt;    2020-02-22   1   6   4   7   6   7   0   2   1   1   5   1   0   0   0   0</span>
<span class="co">#&gt;    2020-02-29   2   3   5   8   9   4   1   2   2   1   1   1   0   2   4   1</span>
<span class="co">#&gt;    2020-03-07   2   9  24  30  17  13   6   6   7   5   6   3   4   0   0   1</span>
<span class="co">#&gt;    2020-03-14   5  45 109  25  36  30  13  23  21   9   8   6   3   3   2   1</span>
<span class="co">#&gt;    2020-03-21   7 120  48  52  19  18  23  17  17   6  10   3   5   4   2   0</span>
<span class="co">#&gt;    2020-03-28  23  76  70  18  27  20  16  15  11   6   2   2   3   1   0   0</span>
<span class="co">#&gt;    2020-04-04  15 103  38  25  24   8  10   8   5   4   7   1   1   0   0   0</span>
<span class="co">#&gt;    2020-04-11  24  79  63  30  23  21   7  12   3   4   0   3   0   0   0   0</span>
<span class="co">#&gt;    2020-04-18  17 111  80  22  15  10  16   3   5   5   1   0   0   0   0   0</span>
<span class="co">#&gt;    2020-04-25  22 143  51  26  17  16   4  12   7   4   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-02  39 106  87  24   9   5   8   6   1   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-09  37 154  68  32   8  12  10  10   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-16  31 153  80  20  22  15  17   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-23  41 154  70  67  24  15   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-30  34 174 191  98  35   0   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-06  22 240 232  62   0   0   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-13  44 355 252   0   0   0   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-20  61 363   0   0   0   0   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-27  84   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0</span>
<span class="co">#&gt;              Delay</span>
<span class="co">#&gt; Date of Onset  16  17  18  19  20</span>
<span class="co">#&gt;    2019-12-28   0   1   2   0   0</span>
<span class="co">#&gt;    2020-01-04   0   0   1   0   0</span>
<span class="co">#&gt;    2020-01-11   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-18   0   0   0   0   0</span>
<span class="co">#&gt;    2020-01-25   0   0   0   1   0</span>
<span class="co">#&gt;    2020-02-01   0   0   0   0   0</span>
<span class="co">#&gt;    2020-02-08   0   0   0   0   1</span>
<span class="co">#&gt;    2020-02-15   0   0   0   0   0</span>
<span class="co">#&gt;    2020-02-22   0   0   0   0   0</span>
<span class="co">#&gt;    2020-02-29   0   0   0   0   0</span>
<span class="co">#&gt;    2020-03-07   1   0   0   0   0</span>
<span class="co">#&gt;    2020-03-14   0   0   0   0   0</span>
<span class="co">#&gt;    2020-03-21   0   0   0   0   0</span>
<span class="co">#&gt;    2020-03-28   0   0   0   0   0</span>
<span class="co">#&gt;    2020-04-04   0   0   0   0   0</span>
<span class="co">#&gt;    2020-04-11   0   0   0   0   0</span>
<span class="co">#&gt;    2020-04-18   0   0   0   0   0</span>
<span class="co">#&gt;    2020-04-25   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-02   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-09   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-16   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-23   0   0   0   0   0</span>
<span class="co">#&gt;    2020-05-30   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-06   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-13   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-20   0   0   0   0   0</span>
<span class="co">#&gt;    2020-06-27   0   0   0   0   0</span></code></pre></div>
<p>We just look at the amount of cases with 30 weeks of delay or less,
it is the default maximum delay considered at nowcasting estimation. It
can be changed by the parameter <code>Dmax</code>.</p>
<p>If this element is grouped by and summarized by the onset of symptoms
date, here <code>DT_SIN_PRI</code>, it is the epidemiological curve
observed. To example it, we plot the estimate and the epidemiological
curve all together.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="va">dados_by_week</span> <span class="op">&lt;-</span> <span class="va">nowcasting_bh_no_age</span><span class="op">$</span><span class="va">data</span>

<span class="va">nowcasting_bh_no_age</span><span class="op">$</span><span class="va">total</span> |&gt; 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dt_event</span>, y <span class="op">=</span> <span class="va">Median</span>, 
             col <span class="op">=</span> <span class="st">'Nowcasting'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dados_by_week</span>, 
            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date_onset</span>, y <span class="op">=</span> <span class="va">observed</span>, 
                col <span class="op">=</span> <span class="st">'Observed'</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">LI</span>, ymax <span class="op">=</span> <span class="va">LS</span>, col <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>, 
              alpha <span class="op">=</span> <span class="fl">0.2</span>, 
              show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, 
        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="st">'black'</span><span class="op">)</span>, 
                     name <span class="op">=</span> <span class="st">''</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">'2 weeks'</span>, 
               date_labels <span class="op">=</span> <span class="st">'%V/%y'</span>, 
               name <span class="op">=</span> <span class="st">'Date in Weeks'</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">''</span>, 
       y <span class="op">=</span> <span class="st">'NÂº Cases'</span><span class="op">)</span></code></pre></div>
<p><img src="nowcasting_importance_files/figure-html/no_age_plot-1.png" width="700"></p>
<p>And as expected, the nowcasting estimated a rising on curve when it
were observed a decaying. Adding to the plot what actually has happened
in that period, with the data inserted posteriorly the period for when
the nowcasting estimated the rising in the curve for SARI
hospitalizations.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nowcasting_bh_no_age</span><span class="op">$</span><span class="va">total</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dt_event</span>, y <span class="op">=</span> <span class="va">Median</span>, col <span class="op">=</span> <span class="st">'Nowcasting'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dados_by_week</span>, 
            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date_onset</span>, y <span class="op">=</span> <span class="va">observed</span>, col <span class="op">=</span> <span class="st">'Observed'</span><span class="op">)</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">LI</span>, ymax <span class="op">=</span> <span class="va">LS</span>, col <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>, 
              alpha <span class="op">=</span> <span class="fl">0.2</span>, 
              show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span> data <span class="op">=</span> <span class="va">sragBH</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">DT_SIN_PRI</span> <span class="op">&lt;=</span> <span class="st">"2020-07-04"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
                 D_SIN_PRI_2 <span class="op">=</span> <span class="va">DT_SIN_PRI</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">DT_SIN_PRI</span>, <span class="st">"%w"</span><span class="op">)</span><span class="op">)</span>
               <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">D_SIN_PRI_2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
               <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">tally</a></span><span class="op">(</span><span class="op">)</span>, 
             mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">D_SIN_PRI_2</span>, y <span class="op">=</span> <span class="va">n</span>, 
                           color <span class="op">=</span> <span class="st">"Observed after one year"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span>, 
        axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'grey50'</span>, <span class="st">'black'</span>, <span class="st">'red'</span><span class="op">)</span>, 
                     name <span class="op">=</span> <span class="st">''</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_breaks <span class="op">=</span> <span class="st">'2 weeks'</span>, 
               date_labels <span class="op">=</span> <span class="st">'%V/%y'</span>, 
               name <span class="op">=</span> <span class="st">'Date in Weeks'</span><span class="op">)</span><span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">''</span>, 
       y <span class="op">=</span> <span class="st">'NÂº Cases'</span><span class="op">)</span></code></pre></div>
<p><img src="nowcasting_importance_files/figure-html/after_one_year-1.png" width="700"></p>
<p>This end the first simple example when estimating the already started
events but not yet reported (i.e.Â nowcasting). The relevance of
nowcasting for public health decision is given by the understanding that
what is present on the databases are only a picture of the real time
situation. The above graph can help policy makers on what decisions
takes in the face of a rising curve of hospitalisations.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Casted by <a href="https://github.com/rafalopespx" class="external-link">Rafael Lopes</a>, <a href="https://github.com/lsbastos/" class="external-link">Leonardo Bastos</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
